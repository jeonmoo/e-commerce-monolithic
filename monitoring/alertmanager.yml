# ğŸš¨ 1. templates ì„¹ì…˜ì€ ë°˜ë“œì‹œ ìµœìƒìœ„(ë§¨ ì™¼ìª½ ì •ë ¬)ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
templates:
  - '/etc/alertmanager/templates/email_template.tmpl'

# ğŸš¨ 2. global ì„¹ì…˜ì„ ì‚­ì œí•˜ê±°ë‚˜ ë¹„ì›Œë‘¡ë‹ˆë‹¤. (ì—¬ê¸°ì„œëŠ” ì‚­ì œë¥¼ ê°€ì •)

route:
  receiver: 'email-receiver'
  group_by: ['alertname', 'job', 'severity']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h

# ğŸš¨ 3. receivers ì„¹ì…˜ì— ëª¨ë“  SMTP ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.
receivers:
  - name: 'email-receiver'
    email_configs:
      - to: 'rjm0710@gmail.com'          # â¬…ï¸ ì•Œë¦¼ ë°›ì„ ì£¼ì†Œ
        send_resolved: true
        
        # ğŸš¨ SMTP ì¸ì¦ ì •ë³´ë¥¼ ì´ê³³ì— ì§ì ‘ ì…ë ¥í•©ë‹ˆë‹¤.
        smarthost: 'smtp.gmail.com:587'
        from: 'rjm0710@gmail.com'
        auth_username: 'rjm0710@gmail.com'
        auth_password: 'epht ciwu hbnm efga' # â¬…ï¸ Gmail ì•± ë¹„ë°€ë²ˆí˜¸ ì§ì ‘ ì…ë ¥!
        auth_identity: 'rjm0710@gmail.com'
        require_tls: true

        # í…œí”Œë¦¿ íŒŒì¼ì— ì •ì˜ëœ ì œëª©ê³¼ ë³¸ë¬¸ ì‚¬ìš©
        subject: '{{ template "email.subject" . }}'
        html: '{{ template "email.html" . }}'
